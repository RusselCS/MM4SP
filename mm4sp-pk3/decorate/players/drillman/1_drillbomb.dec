actor DrillManWep : BaseMM8BDMWep
{
Dropitem ""
inventory.icon "NULLICON"
Weapon.AmmoUse 1
Weapon.AmmoGive 3
Weapon.SlotNumber 1
Tag "Drill Bomb"
Inventory.Pickupmessage "Power up! Music in your heart!"
weapon.ammotype "DrillManAmmo"
+INVENTORY.UNDROPPABLE
States
{
Spawn:
TNT1 A 1
loop
Ready:
DRI1 A 0 ACS_ExecuteAlways(998,0,782)
DRI1 A 0 A_JumpIfInventory("DrillManAmmo",1,"Ready2")
goto NoAmmoReload
Ready2:
DRI1 A 35 A_WeaponReady
DRI1 A 0 A_JumpIfInventory("DrillManAmmo",3,"Ready2")
Goto Reload
Reload:
DRI1 D 0 //A_PlaySoundEx("weapon/crackerthrow","SoundSlot7")
Reload2:
DRI1 D 20 A_WeaponReady
DRI1 D 0 A_GiveInventory("DrillManAmmo",1)
DRI1 D 0 A_PlaySoundEx("weapon/crashland","SoundSlot7")
DRI1 D 0 A_JumpIfInventory("DrillManAmmo",3,"Ready2")
goto Reload2
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
DRI1 A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
DRI1 A 1 A_Raise
Loop
Fire:
DRI1 A 0 A_PlaySoundEx("weapon/mbuster","Weapon")
DRI1 A 0 A_FireCustomMissile("DrillBombSP",0,1,8,0)
DRI1 A 0 A_JumpIfNoAmmo("NoAmmo")
DRI1 BC 4
DRI1 A 6
DRI1 A 0 A_Refire
Goto Ready+1
NoAmmo:
DRI1 BE 4
DRI1 F 6
NoAmmoReload:
DRI1 D 0 //A_PlaySoundEx("weapon/crackerthrow","SoundSlot7")
DRI1 G 1 A_WeaponReady(WRF_NOFIRE)
DRI1 D 0 A_JumpIfInventory("DrillManAmmo",3,"Ready2") //deals with weird edge cases
DRI1 G 19 A_WeaponReady(WRF_NOFIRE)
DRI1 D 0 A_GiveInventory("DrillManAmmo",1)
DRI1 D 0 A_PlaySoundEx("weapon/crashland","SoundSlot7")
goto Reload2
}
}

actor DrillManAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 3
+INVENTORY.IGNORESKILL
}

actor DrillBombSP 
{
PROJECTILE
+EXPLODEONWATER
+MTHRUSPECIES
Speed 25
Damage 0
Translation "87:87=4:4"
damagetype "Buster"
Scale 2.5
Height 6
Radius 6
States
{
Spawn:
DRIL A 0
DRIL A 0 A_PlaySoundEx("weapon/drillfly","Weapon")
DRIL ABC 2 
loop
Death:
DRIL A 0 A_Stop
DRIL A 0 A_PlaySoundEx("weapon/drillexplode", "Weapon")
DRIL A 0 A_Explode(30,96,0,0,16)
TNT1 A 2 A_SpawnItem("DrillExplode")
stop
}
}